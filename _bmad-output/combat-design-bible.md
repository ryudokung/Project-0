# Combat Design Bible: Project-0 (The Battle Engine)

**Goal:** Define the mathematical formulas, status effects, and turn-based logic for the "Asynchronous 3D Battle Engine".

## 1. Damage Formulas
The core calculation for any attack:

$$FinalDamage = (BaseAttack \times TypeMultiplier) - (TargetDefense \times DefenseEfficiency)$$

### 1.1 Type Multipliers (Rock-Paper-Scissors)
| Attacker \ Defender | Kinetic | Energy | Explosive |
| :--- | :--- | :--- | :--- |
| **Kinetic** | 1.0x | 1.5x | 0.5x |
| **Energy** | 0.5x | 1.0x | 1.5x |
| **Explosive** | 1.5x | 0.5x | 1.0x |

### 1.2 Critical Hits
- **Crit Chance:** Base 5% + (Accuracy / 100).
- **Crit Damage:** 1.5x Final Damage.

## 2. Status Effects (The "Narrative" Combat)
Combat isn't just about HP; it's about system integrity:

- **System Overheat:** (From Energy attacks) Reduces Accuracy by 50% for 2 turns.
- **Armor Breach:** (From Kinetic attacks) Reduces Defense by 30% permanently for the mission.
- **Engine Stall:** (From Explosive attacks) Reduces Evasion to 0 for 1 turn.
- **Pilot Fatigue:** (From long missions) Reduces all stats by 10% per turn after turn 10.

## 3. The "Options" System (Sub-stats)
Options are the "Soul" of the NFT. They are generated by AI and can be:
- **Offensive:** +% Damage, +% Crit, +% Armor Pen.
- **Defensive:** +% HP, +% Evasion, +% Resistance.
- **Utility:** +% Scanner Range, -% Fuel Cost, +% Salvage Rate.

## 4. Battle Flow (The "Click-to-Action" Logic)
The battle is a series of tactical decisions triggered by clicks:
1. **Initiative Phase:** Higher Speed determines the order of clickable actions.
2. **Action Selection:** Player clicks on a target or a specific skill (e.g., "Fire Railgun", "Deploy Smoke").
3. **Resource Cost:** Every action click consumes a resource (O2 for Pilot, Fuel/Energy for Vehicles).
4. **Resolution Phase:** Damage applied, Status effects triggered.
5. **Visualization Phase:** Backend sends the "Tick Log" to the Frontend.
    - **Frontend:** Renders a high-fidelity 3D "Action Shot" (R3F) based on the click (e.g., "Mech A fires Railgun at Mech B's Left Arm").

## 5. Pilot EVA Combat (High-Stakes Clicks)
EVA combat is simplified but higher risk:
- **Stealth vs. Detection:** If Stealth > Detection, Pilot gets a "Surprise Attack" (3x Damage).
- **O2 Management:** Every click (moving, searching, attacking) consumes 2-5% O2. If O2 reaches 0, Pilot dies instantly.
- **Melee Focus:** EVA combat favors Swords and Sidearms over heavy Mech weapons. Every click must be calculated.
